(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var r=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._form=r,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector),this._spanErrors=Array.from(this._form.querySelectorAll(".popup__error"))}var r,n;return r=t,(n=[{key:"_hideInputError",value:function(t){t.classList.remove(this._config.inputErrorClass);var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._config.errorClass),e.textContent=""}},{key:"_showInputError",value:function(t){t.classList.add(this._config.inputErrorClass);var e=this._form.querySelector(".".concat(t.id,"-error"));e.classList.add(this._config.errorClass),e.textContent=t.validationMessage}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"disableAddCardPopupButton",value:function(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"switchProfileButtonMode",value:function(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"switchErrorMode",value:function(){this._spanErrors.forEach((function(t){t.textContent=""})),this._inputList.forEach((function(t){t.classList.remove("popup__input_type_error")}))}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}var i=function(){function t(e,r,n,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=e.name,this._photo=e.link,this._likes=e.likes,this._ownerId=e.owner._id,this._cardId=e._id,this._userId=r,this._templateSelector=n,this._openFullscreen=o,this._openRemoveCardPopup=i,this._handleLikeCard=u}var e,r;return e=t,(r=[{key:"addLike",value:function(){this._likeButton.classList.add("card__like_active")}},{key:"deleteLike",value:function(){this._likeButton.classList.remove("card__like_active")}},{key:"countLikes",value:function(t){this._likesArray=t,this._newCard.querySelector(".card__likes-counter").textContent=this._likesArray.length}},{key:"_showUrn",value:function(){this._userId!==this._ownerId&&(this._deleteButton.style.display="none")}},{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setData",value:function(){var t=this;this._cardTitle.textContent=this._title,this._cardImage.src=this._photo,this._cardImage.alt=this._title,this._likesCounter.textContent=this._likes.length,this._likes.some((function(e){return e._id===t._userId}))&&this._likeButton.classList.add("card__like_active")}},{key:"deleteCard",value:function(){this._newCard.remove(),this._newCard=null}},{key:"_switchLike",value:function(){this._likeButton.classList.toggle("card__like_active")}},{key:"_setEventListeners",value:function(){var t=this;this._deleteButton.addEventListener("click",(function(){t._openRemoveCardPopup(t)})),this._likeButton.addEventListener("click",(function(){t._handleLikeCard(t._cardId,t._isLiked,t.checkMyLikeStatus)})),this._cardImage.addEventListener("click",(function(){t._openFullscreen(t._title,t._photo)}))}},{key:"generateCard",value:function(){return this._newCard=this._getTemplate(),this._cardTitle=this._newCard.querySelector(".card__title"),this._cardImage=this._newCard.querySelector(".card__photo"),this._deleteButton=this._newCard.querySelector(".card__delete-button"),this._likeButton=this._newCard.querySelector(".card__like"),this._likesCounter=this._newCard.querySelector(".card__likes-counter"),this._showUrn(),this._setData(),this._setEventListeners(),this._newCard}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===u(o)?o:String(o)),n)}var o}var l=function(){function t(e,r,n){e.items;var o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=o,this._container=document.querySelector(r),this._api=n}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderCards",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&c(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=document.querySelector(e),this._closeIcon=this._selector.querySelector(".popup__close-icon")}var e,r;return e=t,(r=[{key:"open",value:function(){this._selector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose.bind(this))}},{key:"close",value:function(){this._selector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose.bind(this))}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._closeIcon.addEventListener("click",(function(){t.close()})),this._selector.addEventListener("click",(function(e){e.target.classList.contains("popup_opened")&&t.close()}))}}])&&s(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},d.apply(this,arguments)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(n);if(o){var r=_(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._title=e._selector.querySelector(".popup__fullscreen-title"),e._image=e._selector.querySelector(".popup__fullscreen-image"),e}return e=u,(r=[{key:"open",value:function(t,e){d(_(u.prototype),"open",this).call(this),this._title.textContent=t,this._image.src=e,this._image.alt=t}}])&&y(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},S.apply(this,arguments)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(n);if(o){var r=k(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._submitForm=e,r._form=r._selector.querySelector(".popup__form"),r._formInputList=r._form.querySelectorAll(".popup__input"),r}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._inputsObject={},this._formInputList.forEach((function(e){t._inputsObject[e.name]=e.value})),this._inputsObject}},{key:"setEventListeners",value:function(){var t=this;S(k(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitForm(t._getInputValues()),t.close()}))}},{key:"close",value:function(){S(k(u.prototype),"close",this).call(this),this._form.reset()}}])&&b(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},O.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(n);if(o){var r=P(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._form=r._selector.querySelector(".popup__form_type_delete-card"),r._deleteButton=r._selector.querySelector(".popup__submit-button_type_delete-card"),r._submitCallback=e,r}return e=u,(r=[{key:"setEventListeners",value:function(){var t=this;O(P(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitCallback(),t.close()}))}},{key:"setSubmitAction",value:function(t){this._submitCallback=t}}])&&j(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===q(o)?o:String(o)),n)}var o}var T=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(e.userNameSelector),this._userAbout=document.querySelector(e.userAboutSelector),this._avatar=o}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent}}},{key:"setUserInfo",value:function(t){this._userName.textContent=t.name,this._userAbout.textContent=t.about}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===A(o)?o:String(o)),n)}var o}var R=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._usersUrl=e.url.usersUrl,this._cardsUrl=e.url.cardsUrl,this._avatarUrl=e.url.avatarUrl,this._headers=e.headers}var e,r;return e=t,(r=[{key:"getInfoAboutUser",value:function(){return fetch(this._usersUrl,{method:"GET",headers:this._headers}).then((function(t){if(t.ok)return t.json();console.log("ошибка получения данных")}))}},{key:"getInitialCards",value:function(){return fetch(this._cardsUrl,{method:"GET",headers:this._headers}).then((function(t){if(t.ok)return t.json()}))}},{key:"editProfileInfo",value:function(t){return fetch(this._usersUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){if(t.ok)return t.json();console.log("ошибка обработки данных")}))}},{key:"editAvatar",value:function(t){return fetch(this._avatarUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){if(t.ok)return t.json();console.log("ошибка обработки данных аватара")}))}},{key:"sendCard",value:function(t){return fetch(this._cardsUrl,{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link,likes:t.likes})}).then((function(t){if(t.ok)return console.log("отправка карточки прошла успешно"),t.json();console.log("ошибка получения данных")}))}},{key:"deleteCard",value:function(t){return fetch(this._cardsUrl+"/"+t,{method:"DELETE",headers:{authorization:"e900e361-a4f9-4167-b7d1-fcc078aa308a"}}).then((function(t){if(t.ok)return t.json();console.log("ошибка удаления карточки.","не проходит проверку res.ok")})).catch((function(t){console.log("не работает",t)}))}},{key:"putLike",value:function(t){return fetch("https://mesto.nomoreparties.co/v1/cohort-63/cards/".concat(t,"/likes"),{method:"PUT",headers:{authorization:"e900e361-a4f9-4167-b7d1-fcc078aa308a"}}).then((function(t){if(t.ok)return t.json()}))}},{key:"deleteLike",value:function(t){return fetch("https://mesto.nomoreparties.co/v1/cohort-63/cards/".concat(t,"/likes"),{method:"DELETE",headers:{authorization:"e900e361-a4f9-4167-b7d1-fcc078aa308a"}}).then((function(t){if(t.ok)return t.json()}))}}])&&B(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x=document.querySelector(".profile__edit-button"),U=(document.querySelector(".popup_type_profile"),document.querySelector(".profile__name")),D=document.querySelector(".profile__description"),N=document.querySelector(".popup__form_type_profile"),M=document.querySelector(".popup__input_type_name"),V=document.querySelector(".popup__input_type_profession"),z=document.querySelector(".profile__avatar"),F=document.querySelector(".popup__form_type_avatar"),J=(document.querySelectorAll(".popup__close-icon"),document.querySelectorAll(".popup"),document.querySelector(".elements"),document.querySelector(".profile__add-button")),G=(document.querySelector(".popup_type_add-card"),document.querySelector(".popup__input_type_card-name")),H=document.querySelector(".popup__input_type_card-link"),$=document.querySelector(".popup__form_type_add-card");function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}document.querySelector(".popup__fullscreen-image"),document.querySelector(".popup__fullscreen-title"),document.querySelector(".popup_type_fullscreen"),document.querySelector(".popup_type_delete-card");var Q=new R({url:{usersUrl:"https://nomoreparties.co/v1/cohort-63/users/me",cardsUrl:"https://mesto.nomoreparties.co/v1/cohort-63/cards",avatarUrl:"https://mesto.nomoreparties.co/v1/cohort-63/users/me/avatar"},headers:{authorization:"e900e361-a4f9-4167-b7d1-fcc078aa308a","Content-Type":"application/json"}});new T({userNameSelector:".profile__name",userAboutSelector:".profile__description"},U,D,z);var W=new w(".popup_type_profile",(function(t){Q.editProfileInfo(t).then((function(t){console.log(t,"данные в момент отправления новой информации профиля"),U.textContent=t.name,D.textContent=t.about}))}));W.setEventListeners(),x.addEventListener("click",(function(){ut.switchErrorMode(),ut.switchProfileButtonMode(),M.value=U.textContent,V.value=D.textContent,W.open()}));var X=new w(".popup_type_avatar",(function(){var t=document.querySelector(".popup__input_type_avatar").value;console.log(t,"ссылка на аватар"),Q.editAvatar(t).then((function(t){console.log(t,"результат работы аватара"),z.src=t.avatar}))}));X.setEventListeners(),z.addEventListener("click",(function(){X.open()}));var Y=null;Promise.all([Q.getInfoAboutUser(),Q.getInitialCards()]).then((function(t){var e,r,n=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,c=[],l=!0,a=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){a=!0,o=t}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(a)throw o}}return c}}(e,r)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];console.log(o,i,"вооооооооооооооот они!!!"),Y=o._id,console.log(Y,"hahahaahha"),U.textContent=o.name,D.textContent=o.about,z.src=o.avatar,Z.renderCards(i.reverse())})).catch((function(t){alert("Страница временно недоступна, ошибка - ".concat(t))}));var Z=new l({items:[],renderer:function(t){Z.addItem(tt(t))}},".elements");function tt(t){var e=new i(t,Y,"#card-template",nt,(function(){ot.open(),ot.setSubmitAction((function(){Q.deleteCard(t._id).then((function(){e.deleteCard()}))}))}),(function(){t.likes.some((function(t){return t._id===Y}))?Q.deleteLike(t._id).then((function(r){console.log("удалил лайк"),e.deleteLike(),t.likes=r.likes,e.countLikes(r.likes)})):Q.putLike(t._id).then((function(r){console.log("поставил лайк"),e.addLike(),t.likes=r.likes,e.countLikes(r.likes)}))}));return e.generateCard()}var et=new w(".popup_type_add-card",(function(){var t={name:G.value,link:H.value,likes:[],owner:{_id:Y}};Q.sendCard(t).then((function(t){Z.addItem(tt(t))}))}));et.setEventListeners(),J.addEventListener("click",(function(){ct.switchErrorMode(),ct.disableAddCardPopupButton(),et.open()}));var rt=new v(".popup_type_fullscreen");function nt(t,e){rt.open(t,e)}rt.setEventListeners();var ot=new L(".popup_type_delete-card");ot.setEventListeners();var it={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},ut=new r(it,N);ut.enableValidation();var ct=new r(it,$);ct.enableValidation(),new r(it,F)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoic3JCQUFPLElBQU1BLEVBQWEsV0FDdEIsU0FBQUEsRUFBWUMsRUFBUUMsSSw0RkFBTUMsQ0FBQSxLQUFBSCxHQUN4QkksS0FBS0MsUUFBVUosRUFDZkcsS0FBS0UsTUFBUUosRUFFYkUsS0FBS0csV0FBYUMsTUFBTUMsS0FBS0wsS0FBS0UsTUFBTUksaUJBQWlCTixLQUFLQyxRQUFRTSxnQkFFdEVQLEtBQUtRLGVBQWlCUixLQUFLRSxNQUFNTyxjQUFjVCxLQUFLQyxRQUFRUyxzQkFFNURWLEtBQUtXLFlBQWNQLE1BQU1DLEtBQUtMLEtBQUtFLE1BQU1JLGlCQUFpQixpQkFDNUQsQyxRQStFQyxPLEVBL0VBVixHLEVBQUEsRUFBQWdCLElBQUEsa0JBQUFDLE1BR0QsU0FBZ0JDLEdBQ1pBLEVBQWFDLFVBQVVDLE9BQU9oQixLQUFLQyxRQUFRZ0IsaUJBRTNDLElBQU1DLEVBQVlsQixLQUFLRSxNQUFNTyxjQUFjLElBQURVLE9BQUtMLEVBQWFNLEdBQUUsV0FDOURGLEVBQVVILFVBQVVDLE9BQU9oQixLQUFLQyxRQUFRb0IsWUFDeENILEVBQVVJLFlBQWMsRUFDNUIsR0FBQyxDQUFBVixJQUFBLGtCQUFBQyxNQUdELFNBQWdCQyxHQUNaQSxFQUFhQyxVQUFVUSxJQUFJdkIsS0FBS0MsUUFBUWdCLGlCQUV4QyxJQUFNQyxFQUFZbEIsS0FBS0UsTUFBTU8sY0FBYyxJQUFEVSxPQUFLTCxFQUFhTSxHQUFFLFdBQzlERixFQUFVSCxVQUFVUSxJQUFJdkIsS0FBS0MsUUFBUW9CLFlBQ3JDSCxFQUFVSSxZQUFjUixFQUFhVSxpQkFDekMsR0FBQyxDQUFBWixJQUFBLG1CQUFBQyxNQUdELFNBQWlCWSxHQUNiLE9BQU9BLEVBQVVDLE1BQUssU0FBQ1osR0FBWSxPQUFNQSxFQUFhYSxTQUFTQyxLQUFLLEdBQ3hFLEdBQUMsQ0FBQWhCLElBQUEscUJBQUFDLE1BR0QsV0FDUWIsS0FBSzZCLGlCQUFpQjdCLEtBQUtHLGFBQzNCSCxLQUFLUSxlQUFlTyxVQUFVUSxJQUFJdkIsS0FBS0MsUUFBUTZCLHFCQUMvQzlCLEtBQUtRLGVBQWV1QixVQUFXLElBRS9CL0IsS0FBS1EsZUFBZU8sVUFBVUMsT0FBT2hCLEtBQUtDLFFBQVE2QixxQkFDbEQ5QixLQUFLUSxlQUFldUIsVUFBVyxFQUV2QyxHQUFDLENBQUFuQixJQUFBLHNCQUFBQyxNQUdELFNBQW9CQyxHQUNaQSxFQUFhYSxTQUFTQyxNQUN0QjVCLEtBQUtnQyxnQkFBZ0JsQixHQUVsQmQsS0FBS2lDLGdCQUFnQm5CLEVBQ2hDLEdBQUMsQ0FBQUYsSUFBQSxxQkFBQUMsTUFHRCxXQUFxQixJQUFBcUIsRUFBQSxLQUNqQmxDLEtBQUtHLFdBQVdnQyxTQUFRLFNBQUNyQixHQUNyQkEsRUFBYXNCLGlCQUFpQixTQUFTLFdBQ25DRixFQUFLRyxvQkFBb0J2QixHQUN6Qm9CLEVBQUtJLG9CQUNULEdBQ0osR0FDSixHQUFDLENBQUExQixJQUFBLG1CQUFBQyxNQUdELFdBQ0liLEtBQUt1QyxvQkFDVCxHQUFDLENBQUEzQixJQUFBLDRCQUFBQyxNQUdELFdBQ0liLEtBQUtRLGVBQWVPLFVBQVVRLElBQUl2QixLQUFLQyxRQUFRNkIscUJBQy9DOUIsS0FBS1EsZUFBZXVCLFVBQVcsQ0FDbkMsR0FBQyxDQUFBbkIsSUFBQSwwQkFBQUMsTUFHRCxXQUNJYixLQUFLUSxlQUFlTyxVQUFVQyxPQUFPaEIsS0FBS0MsUUFBUTZCLHFCQUNsRDlCLEtBQUtRLGVBQWV1QixVQUFXLENBQ25DLEdBQUMsQ0FBQW5CLElBQUEsa0JBQUFDLE1BR0QsV0FDSWIsS0FBS1csWUFBWXdCLFNBQVEsU0FBQ0ssR0FDdEJBLEVBQUtsQixZQUFjLEVBQ3ZCLElBQ0F0QixLQUFLRyxXQUFXZ0MsU0FBUSxTQUFDTSxHQUNyQkEsRUFBTTFCLFVBQVVDLE9BQU8sMEJBQzNCLEdBQ0osTSxvRUFBQ3BCLENBQUEsQ0F6RnFCLEcsbXFCQ0FuQixJQUFNOEMsRUFBSSxXQUNiLFNBQUFBLEVBQVlDLEVBQU1DLEVBQVFDLEVBQWtCQyxFQUFZQyxFQUFxQkMsSSw0RkFBZ0JqRCxDQUFBLEtBQUEyQyxHQUV6RjFDLEtBQUtpRCxPQUFTTixFQUFLTyxLQUNuQmxELEtBQUttRCxPQUFTUixFQUFLUyxLQUNuQnBELEtBQUtxRCxPQUFTVixFQUFLVyxNQUNuQnRELEtBQUt1RCxTQUFXWixFQUFLYSxNQUFNQyxJQUMzQnpELEtBQUswRCxRQUFVZixFQUFLYyxJQUVwQnpELEtBQUsyRCxRQUFVZixFQUdmNUMsS0FBSzRELGtCQUFvQmYsRUFFekI3QyxLQUFLNkQsZ0JBQWtCZixFQUN2QjlDLEtBQUs4RCxxQkFBdUJmLEVBRzVCL0MsS0FBSytELGdCQUFrQmYsQ0FFM0IsQyxRQStGQyxPLEVBL0ZBTixHLEVBQUEsRUFBQTlCLElBQUEsVUFBQUMsTUFHRCxXQUNJYixLQUFLZ0UsWUFBWWpELFVBQVVRLElBQUksb0JBRW5DLEdBQUMsQ0FBQVgsSUFBQSxhQUFBQyxNQUVELFdBQ0liLEtBQUtnRSxZQUFZakQsVUFBVUMsT0FBTyxvQkFDdEMsR0FBQyxDQUFBSixJQUFBLGFBQUFDLE1BRUQsU0FBV29ELEdBQ1BqRSxLQUFLa0UsWUFBY0QsRUFDRWpFLEtBQUttRSxTQUFTMUQsY0FBYyx3QkFDcENhLFlBQWN0QixLQUFLa0UsWUFBWUUsTUFDaEQsR0FJQSxDQUFBeEQsSUFBQSxXQUFBQyxNQUNBLFdBQ09iLEtBQUsyRCxVQUFZM0QsS0FBS3VELFdBQ3JCdkQsS0FBS3FFLGNBQWNDLE1BQU1DLFFBQVUsT0FFM0MsR0FFSixDQUFBM0QsSUFBQSxlQUFBQyxNQUNJLFdBR0ksT0FGb0IyRCxTQUFTL0QsY0FBY1QsS0FBSzRELG1CQUFtQmEsUUFBUWhFLGNBQWMsU0FBU2lFLFdBQVUsRUFHaEgsR0FBQyxDQUFBOUQsSUFBQSxXQUFBQyxNQUdELFdBQVcsSUFBQXFCLEVBQUEsS0FDUGxDLEtBQUsyRSxXQUFXckQsWUFBY3RCLEtBQUtpRCxPQUNuQ2pELEtBQUs0RSxXQUFXQyxJQUFNN0UsS0FBS21ELE9BQzNCbkQsS0FBSzRFLFdBQVdFLElBQU05RSxLQUFLaUQsT0FHM0JqRCxLQUFLK0UsY0FBY3pELFlBQWN0QixLQUFLcUQsT0FBT2UsT0FHMUNwRSxLQUFLcUQsT0FBTzNCLE1BQUssU0FBQXNELEdBQUksT0FBSUEsRUFBS3ZCLE1BQVF2QixFQUFLeUIsT0FBTyxLQUNqRDNELEtBQUtnRSxZQUFZakQsVUFBVVEsSUFBSSxvQkFFdkMsR0FBQyxDQUFBWCxJQUFBLGFBQUFDLE1BR0QsV0FDSWIsS0FBS21FLFNBQVNuRCxTQUNkaEIsS0FBS21FLFNBQVcsSUFDcEIsR0FBQyxDQUFBdkQsSUFBQSxjQUFBQyxNQUdELFdBQ0liLEtBQUtnRSxZQUFZakQsVUFBVWtFLE9BQU8sb0JBQ3RDLEdBQUMsQ0FBQXJFLElBQUEscUJBQUFDLE1BR0QsV0FBcUIsSUFBQXFFLEVBQUEsS0FDakJsRixLQUFLcUUsY0FBY2pDLGlCQUFpQixTQUFTLFdBQ3pDOEMsRUFBS3BCLHFCQUFxQm9CLEVBQzlCLElBRUFsRixLQUFLZ0UsWUFBWTVCLGlCQUFpQixTQUFTLFdBQ3ZDOEMsRUFBS25CLGdCQUFnQm1CLEVBQUt4QixRQUFTd0IsRUFBS0MsU0FBVUQsRUFBS0Usa0JBRzNELElBRUFwRixLQUFLNEUsV0FBV3hDLGlCQUFpQixTQUFTLFdBQVE4QyxFQUFLckIsZ0JBQWdCcUIsRUFBS2pDLE9BQVFpQyxFQUFLL0IsT0FBUSxHQUNyRyxHQUFDLENBQUF2QyxJQUFBLGVBQUFDLE1BR0QsV0FrQkksT0FqQkFiLEtBQUttRSxTQUFXbkUsS0FBS3FGLGVBRXJCckYsS0FBSzJFLFdBQWEzRSxLQUFLbUUsU0FBUzFELGNBQWMsZ0JBRTlDVCxLQUFLNEUsV0FBYTVFLEtBQUttRSxTQUFTMUQsY0FBYyxnQkFFOUNULEtBQUtxRSxjQUFnQnJFLEtBQUttRSxTQUFTMUQsY0FBYyx3QkFFakRULEtBQUtnRSxZQUFjaEUsS0FBS21FLFNBQVMxRCxjQUFjLGVBRS9DVCxLQUFLK0UsY0FBZ0IvRSxLQUFLbUUsU0FBUzFELGNBQWMsd0JBRWpEVCxLQUFLc0YsV0FFTHRGLEtBQUt1RixXQUNMdkYsS0FBS3VDLHFCQUVFdkMsS0FBS21FLFFBQ2hCLE0sb0VBQUN6QixDQUFBLENBbkhZLEcsbXFCQ0FWLElBQU04QyxFQUFPLFdBQ2hCLFNBQUFBLEVBQUFDLEVBQStCQyxFQUFXQyxHQUF4QkYsRUFBTEcsTUFBa0MsSUFBM0JDLEVBQVFKLEVBQVJJLFUsNEZBQVE5RixDQUFBLEtBQUF5RixHQUV4QnhGLEtBQUs4RixVQUFZRCxFQUNqQjdGLEtBQUsrRixXQUFhdkIsU0FBUy9ELGNBQWNpRixHQUN6QzFGLEtBQUtnRyxLQUFPTCxDQUNoQixDLFFBWUMsTyxFQVZESCxHLEVBQUEsRUFBQTVFLElBQUEsVUFBQUMsTUFDQSxTQUFRb0YsR0FDSmpHLEtBQUsrRixXQUFXRyxRQUFRRCxFQUM1QixHQUFDLENBQUFyRixJQUFBLGNBQUFDLE1BR0QsU0FBWXNGLEdBQU8sSUFBQWpFLEVBQUEsS0FDZmlFLEVBQU1oRSxTQUFRLFNBQUNpRSxHQUNYbEUsRUFBSzRELFVBQVVNLEVBQ25CLEdBQ0osTSxvRUFBQ1osQ0FBQSxDQWxCZSxHLG1xQkNBYixJQUFNYSxFQUFLLFdBQ2QsU0FBQUEsRUFBWUMsSSw0RkFBZXZHLENBQUEsS0FBQXNHLEdBQ3ZCckcsS0FBS3VHLFVBQVkvQixTQUFTL0QsY0FBYzZGLEdBQ3hDdEcsS0FBS3dHLFdBQWF4RyxLQUFLdUcsVUFBVTlGLGNBQWMscUJBQ25ELEMsUUE2QkMsTyxFQTdCQTRGLEcsRUFBQSxFQUFBekYsSUFBQSxPQUFBQyxNQUdELFdBQ0liLEtBQUt1RyxVQUFVeEYsVUFBVVEsSUFBSSxnQkFDN0JpRCxTQUFTcEMsaUJBQWlCLFVBQVdwQyxLQUFLeUcsZ0JBQWdCQyxLQUFLMUcsTUFDbkUsR0FBQyxDQUFBWSxJQUFBLFFBQUFDLE1BR0QsV0FDSWIsS0FBS3VHLFVBQVV4RixVQUFVQyxPQUFPLGdCQUNoQ3dELFNBQVNtQyxvQkFBb0IsVUFBVzNHLEtBQUt5RyxnQkFBZ0JDLEtBQUsxRyxNQUN0RSxHQUFDLENBQUFZLElBQUEsa0JBQUFDLE1BR0QsU0FBZ0IrRixHQUNHLFdBQVpBLEVBQUloRyxLQUNIWixLQUFLNkcsT0FFYixHQUFDLENBQUFqRyxJQUFBLG9CQUFBQyxNQUdELFdBQW9CLElBQUFxQixFQUFBLEtBQ2hCbEMsS0FBS3dHLFdBQVdwRSxpQkFBaUIsU0FBUyxXQUFRRixFQUFLMkUsT0FBUSxJQUcvRDdHLEtBQUt1RyxVQUFVbkUsaUJBQWlCLFNBQVMsU0FBQ3dFLEdBQ25DQSxFQUFJRSxPQUFPL0YsVUFBVWdHLFNBQVMsaUJBQW1CN0UsRUFBSzJFLE9BQzdELEdBQ0osTSxvRUFBQ1IsQ0FBQSxDQWpDYSxHLGd2Q0NFWCxJQUFNVyxFQUFjLFNBQUFDLEkscVJBQUFDLENBQUFGLEVBQUFDLEdBQUEsSSxRQUFBRSxHLEVBQUFILEUscXJCQUN2QixTQUFBQSxFQUFZVixHQUFlLElBQUFwRSxFQUdnRCxPLDRGQUhoRG5DLENBQUEsS0FBQWlILElBQ3ZCOUUsRUFBQWlGLEVBQUFDLEtBQUEsS0FBTWQsSUFDRHJELE9BQVNmLEVBQUtxRSxVQUFVOUYsY0FBYyw0QkFDM0N5QixFQUFLbUYsT0FBU25GLEVBQUtxRSxVQUFVOUYsY0FBYyw0QkFBNEJ5QixDQUMzRSxDQVNDLE8sRUFUQThFLEcsRUFBQSxFQUFBcEcsSUFBQSxPQUFBQyxNQUVELFNBQUt5RyxFQUFPbEUsR0FHUm1FLEVBQUFDLEVBQUFSLEVBQUFTLFdBQUEsYUFBQUwsS0FBQSxNQUNBcEgsS0FBS2lELE9BQU8zQixZQUFjZ0csRUFDMUJ0SCxLQUFLcUgsT0FBT3hDLElBQU16QixFQUNsQnBELEtBQUtxSCxPQUFPdkMsSUFBTXdDLENBQ3RCLE0sb0VBQUNOLENBQUEsQ0Fkc0IsQ0FBU1gsRyxndkNDQTdCLElBQU1xQixFQUFhLFNBQUFULEkscVJBQUFDLENBQUFRLEVBQUFULEdBQUEsSSxRQUFBRSxHLEVBQUFPLEUscXJCQUN0QixTQUFBQSxFQUFZcEIsRUFBZXFCLEdBQVUsSUFBQXpGLEVBTWtDLE8sNEZBTmxDbkMsQ0FBQSxLQUFBMkgsSUFDakN4RixFQUFBaUYsRUFBQUMsS0FBQSxLQUFNZCxJQUNEc0IsWUFBY0QsRUFDbkJ6RixFQUFLaEMsTUFBUWdDLEVBQUtxRSxVQUFVOUYsY0FBYyxnQkFHMUN5QixFQUFLMkYsZUFBaUIzRixFQUFLaEMsTUFBTUksaUJBQWlCLGlCQUFpQjRCLENBQ3ZFLENBNkJDLE8sRUE3QkF3RixHLEVBQUEsRUFBQTlHLElBQUEsa0JBQUFDLE1BR0QsV0FBa0IsSUFBQXFFLEVBQUEsS0FPZCxPQU5BbEYsS0FBSzhILGNBQWdCLENBQUUsRUFFdkI5SCxLQUFLNkgsZUFBZTFGLFNBQVEsU0FBQ00sR0FDekJ5QyxFQUFLNEMsY0FBY3JGLEVBQU1TLE1BQVFULEVBQU01QixLQUMzQyxJQUVPYixLQUFLOEgsYUFDaEIsR0FBQyxDQUFBbEgsSUFBQSxvQkFBQUMsTUFFRCxXQUFvQixJQUFBa0gsRUFBQSxLQUNoQlIsRUFBQUMsRUFBQUUsRUFBQUQsV0FBQSwwQkFBQUwsS0FBQSxNQUNBcEgsS0FBS0UsTUFBTWtDLGlCQUFpQixVQUFVLFNBQUN3RSxHQUVuQ0EsRUFBSW9CLGlCQUVKRCxFQUFLSCxZQUFZRyxFQUFLRSxtQkFHdEJGLEVBQUtsQixPQUNULEdBQ0osR0FBQyxDQUFBakcsSUFBQSxRQUFBQyxNQUVELFdBQ0kwRyxFQUFBQyxFQUFBRSxFQUFBRCxXQUFBLGNBQUFMLEtBQUEsTUFDQXBILEtBQUtFLE1BQU1nSSxPQUNmLE0sb0VBQUNSLENBQUEsQ0FyQ3FCLENBQVNyQixHLGd2Q0NBNUIsSUFBTThCLEVBQXFCLFNBQUFsQixJLHFSQUFBQyxDQUFBaUIsRUFBQWxCLEdBQUEsSSxRQUFBRSxHLEVBQUFnQixFLHFyQkFDOUIsU0FBQUEsRUFBWUMsRUFBVUMsR0FBZ0IsSUFBQW5HLEVBSUksTyw0RkFKSm5DLENBQUEsS0FBQW9JLElBQ2xDakcsRUFBQWlGLEVBQUFDLEtBQUEsS0FBTWdCLElBQ0RsSSxNQUFRZ0MsRUFBS3FFLFVBQVU5RixjQUFjLGlDQUMxQ3lCLEVBQUttQyxjQUFnQm5DLEVBQUtxRSxVQUFVOUYsY0FBYywwQ0FDbER5QixFQUFLb0csZ0JBQWtCRCxFQUFlbkcsQ0FDMUMsQ0FhQyxPLEVBYkFpRyxHLEVBQUEsRUFBQXZILElBQUEsb0JBQUFDLE1BRUQsV0FBb0IsSUFBQXFFLEVBQUEsS0FDaEJxQyxFQUFBQyxFQUFBVyxFQUFBVixXQUFBLDBCQUFBTCxLQUFBLE1BQ0FwSCxLQUFLRSxNQUFNa0MsaUJBQWlCLFVBQVUsU0FBQ3dFLEdBQ25DQSxFQUFJb0IsaUJBQ0o5QyxFQUFLb0Qsa0JBQ0xwRCxFQUFLMkIsT0FDVCxHQUNKLEdBQUMsQ0FBQWpHLElBQUEsa0JBQUFDLE1BRUQsU0FBZ0IwSCxHQUNadkksS0FBS3NJLGdCQUFrQkMsQ0FDM0IsTSxvRUFBQ0osQ0FBQSxDQW5CNkIsQ0FBUzlCLEcsbXFCQ0ZwQyxJQUFNbUMsRUFBUSxXQUNqQixTQUFBQSxFQUFZQyxFQUFVQyxFQUFhQyxFQUFhQyxJLDRGQUFRN0ksQ0FBQSxLQUFBeUksR0FDcER4SSxLQUFLNkksVUFBWXJFLFNBQVMvRCxjQUFjZ0ksRUFBU0ssa0JBQ2pEOUksS0FBSytJLFdBQWF2RSxTQUFTL0QsY0FBY2dJLEVBQVNPLG1CQUlsRGhKLEtBQUtpSixRQUFVTCxDQUNuQixDLFFBZUMsTyxFQWZBSixHLEVBQUEsRUFBQTVILElBQUEsY0FBQUMsTUFHRCxXQUtJLE1BSmlCLENBQ2JxQyxLQUFNbEQsS0FBSzZJLFVBQVV2SCxZQUNyQjRILE1BQU9sSixLQUFLK0ksV0FBV3pILFlBRy9CLEdBQUMsQ0FBQVYsSUFBQSxjQUFBQyxNQUdELFNBQVlzSSxHQUNSbkosS0FBSzZJLFVBQVV2SCxZQUFjNkgsRUFBWWpHLEtBQ3pDbEQsS0FBSytJLFdBQVd6SCxZQUFjNkgsRUFBWUQsS0FDOUMsTSxvRUFBQ1YsQ0FBQSxDQXZCZ0IsRyxtcUJDQWQsSUFBTVksRUFBRyxXQUNaLFNBQUFBLEVBQVl2SixJLDRGQUFRRSxDQUFBLEtBQUFxSixHQUNoQnBKLEtBQUtxSixVQUFZeEosRUFBT3lKLElBQUlDLFNBQzVCdkosS0FBS3dKLFVBQVkzSixFQUFPeUosSUFBSUcsU0FDNUJ6SixLQUFLMEosV0FBYTdKLEVBQU95SixJQUFJSyxVQUM3QjNKLEtBQUs0SixTQUFXL0osRUFBT2dLLE9BQzNCLEMsUUErSEMsTyxFQTdIRFQsRyxFQUFBLEVBQUF4SSxJQUFBLG1CQUFBQyxNQUNBLFdBQ0ksT0FBT2lKLE1BQU05SixLQUFLcUosVUFBVyxDQUN6QlUsT0FBUSxNQUNSRixRQUFTN0osS0FBSzRKLFdBRWJJLE1BQUssU0FBQ0MsR0FDSCxHQUFHQSxFQUFJQyxHQUNILE9BQU9ELEVBQUlFLE9BRWZDLFFBQVFDLElBQUksMEJBQ2hCLEdBQ1IsR0FBQyxDQUFBekosSUFBQSxrQkFBQUMsTUFHRCxXQUNJLE9BQU9pSixNQUFNOUosS0FBS3dKLFVBQVcsQ0FDekJPLE9BQVEsTUFDUkYsUUFBUzdKLEtBQUs0SixXQUViSSxNQUFLLFNBQUNDLEdBQ0gsR0FBR0EsRUFBSUMsR0FDSCxPQUFPRCxFQUFJRSxNQUVuQixHQUVSLEdBQUMsQ0FBQXZKLElBQUEsa0JBQUFDLE1BR0QsU0FBZ0I0SCxHQUNaLE9BQU9xQixNQUFNOUosS0FBS3FKLFVBQVcsQ0FDekJVLE9BQVEsUUFDUkYsUUFBUzdKLEtBQUs0SixTQUNkVSxLQUFNQyxLQUFLQyxVQUFVLENBQ3JCdEgsS0FBTXVGLEVBQVN2RixLQUNmZ0csTUFBT1QsRUFBU1MsVUFHZmMsTUFBSyxTQUFDQyxHQUNILEdBQUdBLEVBQUlDLEdBQ0gsT0FBT0QsRUFBSUUsT0FFZkMsUUFBUUMsSUFBSSwwQkFDaEIsR0FDUixHQUVBLENBQUF6SixJQUFBLGFBQUFDLE1BQ0EsU0FBVzRKLEdBQ1AsT0FBT1gsTUFBTTlKLEtBQUswSixXQUFZLENBQzFCSyxPQUFRLFFBQ1JGLFFBQVM3SixLQUFLNEosU0FDZFUsS0FBTUMsS0FBS0MsVUFBVSxDQUNyQjVCLE9BQVE2QixNQUdQVCxNQUFLLFNBQUNDLEdBQ0gsR0FBR0EsRUFBSUMsR0FDSCxPQUFPRCxFQUFJRSxPQUVmQyxRQUFRQyxJQUFJLGtDQUNoQixHQUNSLEdBRUEsQ0FBQXpKLElBQUEsV0FBQUMsTUFDQSxTQUFTNkosR0FDTCxPQUFPWixNQUFNOUosS0FBS3dKLFVBQVcsQ0FDekJPLE9BQVEsT0FDUkYsUUFBUzdKLEtBQUs0SixTQUNkVSxLQUFNQyxLQUFLQyxVQUFVLENBQUN0SCxLQUFNd0gsRUFBT3hILEtBQU1FLEtBQU1zSCxFQUFPdEgsS0FBTUUsTUFBT29ILEVBQU9wSCxVQUU3RTBHLE1BQUssU0FBQ0MsR0FDSCxHQUFHQSxFQUFJQyxHQUVILE9BREFFLFFBQVFDLElBQUksb0NBQ0xKLEVBQUlFLE9BRWZDLFFBQVFDLElBQUksMEJBQ2hCLEdBRUosR0FFQSxDQUFBekosSUFBQSxhQUFBQyxNQUNBLFNBQVc4SixHQUNQLE9BQU9iLE1BQU05SixLQUFLd0osVUFBWSxJQUFNbUIsRUFBUSxDQUN4Q1osT0FBUSxTQUNSRixRQUFTLENBQ0xlLGNBQWUsMENBR2xCWixNQUFLLFNBQUNDLEdBQ0gsR0FBR0EsRUFBSUMsR0FDSCxPQUFPRCxFQUFJRSxPQUVmQyxRQUFRQyxJQUFJLDRCQUE2Qiw4QkFDN0MsSUFDQ1EsT0FBTSxTQUFDQyxHQUNKVixRQUFRQyxJQUFJLGNBQWVTLEVBQy9CLEdBQ1IsR0FBQyxDQUFBbEssSUFBQSxVQUFBQyxNQUVELFNBQVE4SixHQUNKLE9BQU9iLE1BQU0scURBQUQzSSxPQUFzRHdKLEVBQU0sVUFBVSxDQUM5RVosT0FBUSxNQUNSRixRQUFTLENBQ0xlLGNBQWUsMENBR3RCWixNQUFLLFNBQUNDLEdBQ0gsR0FBR0EsRUFBSUMsR0FDSCxPQUFPRCxFQUFJRSxNQUVuQixHQUNKLEdBQUMsQ0FBQXZKLElBQUEsYUFBQUMsTUFFRCxTQUFXOEosR0FDUCxPQUFPYixNQUFNLHFEQUFEM0ksT0FBc0R3SixFQUFNLFVBQVUsQ0FDOUVaLE9BQVEsU0FDUkYsUUFBUyxDQUNMZSxjQUFlLDBDQUd0QlosTUFBSyxTQUFDQyxHQUNILEdBQUdBLEVBQUlDLEdBQ0gsT0FBT0QsRUFBSUUsTUFFbkIsR0FDSixNLG9FQUFDZixDQUFBLENBcklXLEdDQ0gyQixFQUFhdkcsU0FBUy9ELGNBQWMseUJBR3BDaUksR0FGZWxFLFNBQVMvRCxjQUFjLHVCQUV4QitELFNBQVMvRCxjQUFjLG1CQUNyQ2tJLEVBQWNuRSxTQUFTL0QsY0FBYyx5QkFDckN1SyxFQUFtQnhHLFNBQVMvRCxjQUFjLDZCQUMxQ3dLLEVBQVl6RyxTQUFTL0QsY0FBYywyQkFDbkN5SyxFQUFXMUcsU0FBUy9ELGNBQWMsaUNBR2xDbUksRUFBU3BFLFNBQVMvRCxjQUFjLG9CQUNoQzBLLEVBQWEzRyxTQUFTL0QsY0FBYyw0QkFhcEMySyxHQVRlNUcsU0FBU2xFLGlCQUFpQixzQkFHNUJrRSxTQUFTbEUsaUJBQWlCLFVBR3JCa0UsU0FBUy9ELGNBQWMsYUFHdEIrRCxTQUFTL0QsY0FBYyx5QkFFMUM0SyxHQURtQjdHLFNBQVMvRCxjQUFjLHdCQUNqQitELFNBQVMvRCxjQUFjLGlDQUNoRDZLLEVBQXlCOUcsU0FBUy9ELGNBQWMsZ0NBQ2hEOEssRUFBa0IvRyxTQUFTL0QsY0FBYyw4QiwwR0FHdkIrRCxTQUFTL0QsY0FBYyw0QkFDdkIrRCxTQUFTL0QsY0FBYyw0QkFDbkIrRCxTQUFTL0QsY0FBYywwQkFFM0IrRCxTQUFTL0QsY0FBYywyQkNRdEQsSUFlTWtGLEVBQU0sSUFBSXlELEVBZkUsQ0FDaEJFLElBQUssQ0FDSEMsU0FBVSxpREFDVkUsU0FBVSxvREFDVkUsVUFBVywrREFFYkUsUUFBUyxDQUNQZSxjQUFlLHVDQUNmLGVBQWdCLHNCQTJCUCxJQUFJcEMsRUFBUyxDQUN4Qk0saUJBQWtCLGlCQUNsQkUsa0JBQW1CLHlCQUNsQk4sRUFBYUMsRUFBYUMsR0FIN0IsSUFRTTRDLEVBQWMsSUFBSTlELEVBQWMsdUJBQXVCLFNBQUMrRCxHQUM1RDlGLEVBQUkrRixnQkFBZ0JELEdBQ2pCekIsTUFBSyxTQUFDQyxHQUNMRyxRQUFRQyxJQUFJSixFQUFLLHdEQUNqQnZCLEVBQVlwSCxZQUFjMkksRUFBSS9HLEtBQzlCeUYsRUFBWXJILFlBQWMySSxFQUFJZixLQUNoQyxHQUNKLElBRUFzQyxFQUFZRyxvQkFLWlosRUFBVzNJLGlCQUFpQixTQUFTLFdBQ25Dd0osR0FBcUJDLGtCQUNyQkQsR0FBcUJFLDBCQUNyQmIsRUFBVXBLLE1BQVE2SCxFQUFZcEgsWUFDOUI0SixFQUFTckssTUFBUThILEVBQVlySCxZQUM3QmtLLEVBQVlPLE1BQ2QsSUFLQSxJQUFNQyxFQUFpQixJQUFJdEUsRUFBYyxzQkFBc0IsV0FDN0QsSUFBTStDLEVBQVlqRyxTQUFTL0QsY0FBYyw2QkFBNkJJLE1BRXBFdUosUUFBUUMsSUFBSUksRUFBVyxvQkFDdkI5RSxFQUFJc0csV0FBV3hCLEdBQ1pULE1BQUssU0FBQ0MsR0FDTEcsUUFBUUMsSUFBSUosRUFBSyw0QkFDakJyQixFQUFPL0QsSUFBTW9GLEVBQUlyQixNQUNuQixHQUNKLElBQ0FvRCxFQUFlTCxvQkFHZi9DLEVBQU94RyxpQkFBaUIsU0FBUyxXQUUvQjRKLEVBQWVELE1BQ2pCLElBS0YsSUFBSW5KLEVBQVMsS0FHYnNKLFFBQVFDLElBQUksQ0FBQ3hHLEVBQUl5RyxtQkFBb0J6RyxFQUFJMEcsb0JBQ3RDckMsTUFDQyxTQUFBdkUsR0FBdUIsSSxJQUFBNkcsRyxFQUFBLEUsNENBQUE3RyxJLG8yQkFBckJnRCxFQUFRNkQsRUFBQSxHQUFFbkcsRUFBS21HLEVBQUEsR0FDZmxDLFFBQVFDLElBQUk1QixFQUFVdEMsRUFBTyw0QkFDN0J2RCxFQUFTNkYsRUFBU2hGLElBRWxCMkcsUUFBUUMsSUFBSXpILEVBQVEsY0FHbEI4RixFQUFZcEgsWUFBY21ILEVBQVN2RixLQUNuQ3lGLEVBQVlySCxZQUFjbUgsRUFBU1MsTUFDbkNOLEVBQU8vRCxJQUFNNEQsRUFBU0csT0FJeEIyRCxFQUFTQyxZQUFZckcsRUFBTXNHLFVBQzdCLElBRUQ1QixPQUFNLFNBQUNDLEdBQ040QixNQUFNLDBDQUFEdkwsT0FBNEMySixHQUNuRCxJQU1GLElBQU15QixFQUFXLElBQUkvRyxFQUFRLENBQzNCSSxNQUFPLEdBQ1BDLFNBQVUsU0FBQzhHLEdBQ1RKLEVBQVNLLFFBQVFDLEdBQVdGLEdBQ2hDLEdBQUksYUFHSixTQUFTRSxHQUFXbkMsR0FDbEIsSUFBTWlDLEVBQU8sSUFBSWpLLEVBQUtnSSxFQUFROUgsRUFBUSxpQkFBa0JrSyxJQUV4RCxXQUNFQyxHQUFnQmhCLE9BQ2hCZ0IsR0FBZ0JDLGlCQUFnQixXQUM5QnJILEVBQUlzSCxXQUFXdkMsRUFBT2pILEtBQ25CdUcsTUFBSyxXQUNKMkMsRUFBS00sWUFDUCxHQUNKLEdBQ0YsSUFFQSxXQUNLdkMsRUFBT3BILE1BQU01QixNQUFLLFNBQUFzRCxHQUFJLE9BQUlBLEVBQUt2QixNQUFRYixDQUFNLElBQzlDK0MsRUFBSXVILFdBQVd4QyxFQUFPakgsS0FDbkJ1RyxNQUFLLFNBQUNDLEdBQ0xHLFFBQVFDLElBQUksZUFDWnNDLEVBQUtPLGFBQ0x4QyxFQUFPcEgsTUFBUTJHLEVBQUkzRyxNQUNuQnFKLEVBQUtRLFdBQVdsRCxFQUFJM0csTUFDdEIsSUFHRnFDLEVBQUl5SCxRQUFRMUMsRUFBT2pILEtBQ2hCdUcsTUFBSyxTQUFDQyxHQUNMRyxRQUFRQyxJQUFJLGlCQUNac0MsRUFBS1UsVUFDTDNDLEVBQU9wSCxNQUFRMkcsRUFBSTNHLE1BQ25CcUosRUFBS1EsV0FBV2xELEVBQUkzRyxNQUN0QixHQUVOLElBR0EsT0FEb0JxSixFQUFLVyxjQUUzQixDQUdBLElBQU1DLEdBQWMsSUFBSTdGLEVBQWMsd0JBQXdCLFdBRTVELElBQU1nRCxFQUFTLENBQ2J4SCxLQUFNbUksRUFBdUJ4SyxNQUM3QnVDLEtBQU1rSSxFQUF1QnpLLE1BQzdCeUMsTUFBTyxHQUNQRSxNQUFPLENBQ0xDLElBQU1iLElBSVYrQyxFQUFJNkgsU0FBUzlDLEdBQ1ZWLE1BQUssU0FBQ0MsR0FDTHNDLEVBQVNLLFFBQVFDLEdBQVc1QyxHQUM5QixHQUNKLElBR0FzRCxHQUFZNUIsb0JBQ1pQLEVBQWlCaEosaUJBQWlCLFNBQVMsV0FDekNxTCxHQUFxQjVCLGtCQUNyQjRCLEdBQXFCQyw0QkFDckJILEdBQVl4QixNQUNkLElBRUEsSUFBTTRCLEdBQWEsSUFBSTNHLEVBQWUsMEJBR3RDLFNBQVM4RixHQUFvQnhGLEVBQU9sRSxHQUNsQ3VLLEdBQVc1QixLQUFLekUsRUFBT2xFLEVBQ3pCLENBSkF1SyxHQUFXaEMsb0JBUVgsSUFBTW9CLEdBQWtCLElBQUk1RSxFQUFzQiwyQkFDbEQ0RSxHQUFnQnBCLG9CQU1oQixJQUFNaUMsR0FBZSxDQUNuQkMsYUFBYyxlQUNkdE4sY0FBZSxnQkFDZkcscUJBQXNCLHdCQUN0Qm9CLG9CQUFxQixnQ0FDckJiLGdCQUFpQiwwQkFDakJJLFdBQVksd0JBTVJ1SyxHQUF1QixJQUFJaE0sRUFBY2dPLEdBQWM1QyxHQUM3RFksR0FBcUJrQyxtQkFHckIsSUFBTUwsR0FBdUIsSUFBSTdOLEVBQWNnTyxHQUFjckMsR0FDN0RrQyxHQUFxQkssbUJBR08sSUFBSWxPLEVBQWNnTyxHQUFjekMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbi8v0LzQsNGB0YHQuNCyINC40L3Qv9GD0YLQvtCyXHJcbiAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbi8v0LrQvdC+0L/QutCwINGB0L7RhdGA0LDQvdC10L3QuNGPXHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuLy/QvNCw0YHRgdC40LIg0YHQv9Cw0L3QvtCyINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgICAgIHRoaXMuX3NwYW5FcnJvcnMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19lcnJvcicpKTtcclxuICAgIH07XHJcbiAgXHJcbi8v0L/RgNGP0YfQtdGCINC+0YjQuNCx0LrQuFxyXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4vL9GB0L/QsNC9INGBINC+0YjQuNCx0LrQvtC5XHJcbiAgICAgICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgZXJyb3JTcGFuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuICBcclxuLy/Qv9C+0LrQsNC30YvQstCw0LXRgiDQvtGI0LjQsdC60LhcclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuLy/RgdC/0LDQvSDRgSDQvtGI0LjQsdC60L7QuVxyXG4gICAgICAgIGNvbnN0IGVycm9yU3BhbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yU3Bhbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvclNwYW4udGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICB9O1xyXG5cclxuLy/Qv9GA0L7QstC10YDRj9C10YIg0LXRgdGC0Ywg0LvQuCDQsiDRhNC+0YDQvNC1INGF0L7RgtGPINCx0YsgMSDQvdC10LLQsNC70LjQtNC90YvQuSDQuNC90L/Rg9GCXHJcbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICAgIH07XHJcbiAgXHJcbi8v0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0LrQvdC+0L/QutC4XHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gIFxyXG4vL9Cy0YvQt9GL0LLQsNC10YIg0YTRg9C90LrRhtC40Y4g0YHQutGA0YvRgtGML9C/0L7QutCw0LfQsNGC0Ywg0L7RiNC40LHQutGDINC10YHQu9C4INC/0L7Qu9C1INCy0LDQu9C40LTQvdC+L9C90LXQstCw0LvQuNC00L3QvlxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgeyB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIH1cclxuICAgIH07XHJcbiAgXHJcbi8v0L3QsNGF0L7QtNC40YIg0LLRgdC1INC/0L7Qu9GPINGE0L7RgNC80Ysg0Lgg0L3QsCDQutCw0LbQtNC+0LUg0LLQtdGI0LDQtdGCINGB0L7QsdGL0YLQuNC1IGlucHV0LCDQstGL0LfRi9Cy0LDQtdGCINGG0LXQv9C+0YfQutGDINC/0YDQvtCy0LXRgNC60Lgg0L/QvtC70Y9cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuICBcclxuLy/Qs9C70L7QsdCw0LvRjNC90LDRjyDRhNGD0L3QutGG0LjRjywg0LLRi9C30YvQstCw0LXRgtGB0Y8g0LIg0LjQvdC00LXQutGB0LUg0LTQu9GPINC60LDQttC00L7QuSDRhNC+0YDQvNGLX19fX19fX19fX19fX19fX1xyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfTtcclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINC+0YLQutC70Y7Rh9Cw0LXRgiDQutC90L7Qv9C60YMg0LIg0YTQvtGA0LzQtSDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4INC/0YDQuCDQv9C10YDQstC+0Lwg0L7RgtC60YDRi9GC0LjQuFxyXG4gICAgZGlzYWJsZUFkZENhcmRQb3B1cEJ1dHRvbigpIHtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINCw0LrRgtC40LLQuNGA0YPQtdGCINC60L3QvtC/0LrRgyDQv9GA0L7RhNC40LvRjyDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCDQv9C+0L/QsNC/0LBcclxuICAgIHN3aXRjaFByb2ZpbGVCdXR0b25Nb2RlKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINGB0LrRgNGL0LLQsNC10YIg0YHQv9Cw0L3RiyDRgSDQvtGI0LjQsdC60L7QuSDQuCDRg9C00LDQu9GP0LXRgiDRgdGC0LjQu9C4INC90LXQstCw0LvQuNC00L3Ri9GFINC40L3Qv9GD0YLQvtCyXHJcbiAgICBzd2l0Y2hFcnJvck1vZGUoKSB7XHJcbiAgICAgICAgdGhpcy5fc3BhbkVycm9ycy5mb3JFYWNoKChzcGFuKSA9PiB7XHJcbiAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIH07IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdXNlcklkLCB0ZW1wbGF0ZVNlbGVjdG9yLCBmdWxsc2NyZWVuLCBvcGVuUmVtb3ZlQ2FyZFBvcHVwLCBoYW5kbGVMaWtlQ2FyZCkge1xyXG4gICAgICAgIC8vINGB0LLQvtC50YHRgtCy0LAg0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3Bob3RvID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcblxyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuXHJcbiAgICAgICAgLy8g0YHQtdC70LXQutGC0L7RgFxyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgICAgIC8vINGE0YPQvdC60YbQuNC4INC+0YLQutGA0YvRgtC40Y8g0LzQvtC00LDQu9C+0LpcclxuICAgICAgICB0aGlzLl9vcGVuRnVsbHNjcmVlbiA9IGZ1bGxzY3JlZW47XHJcbiAgICAgICAgdGhpcy5fb3BlblJlbW92ZUNhcmRQb3B1cCA9IG9wZW5SZW1vdmVDYXJkUG9wdXA7XHJcblxyXG4gICAgICAgIC8vINC+0LHRgNCw0LHQvtGC0LrQsCDQu9Cw0LnQutCwXHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcclxuICAgICAgICAvLyB0aGlzLl9pc0xpa2VkID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINGA0LDQsdC+0YLQsCDQu9Cw0LnQutC+0LIgXHJcbiAgICBhZGRMaWtlKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAvLyBkZWJ1Z2dlclxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvdW50TGlrZXMobGlrZXNBcnJheSkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQXJyYXkgPSBsaWtlc0FycmF5O1xyXG4gICAgICAgIGNvbnN0IGxpa2VzQ291bnRlciA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2VzLWNvdW50ZXInKTtcclxuICAgICAgICBsaWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0FycmF5Lmxlbmd0aDtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vINC+0YDQuNGB0L7QstC60LAg0YPRgNC90YssINC10YHQu9C4INC60LDRgNGC0L7Rh9C60LAg0LzQvtGPXHJcbiAgICBfc2hvd1VybigpIHtcclxuICAgICAgICBpZih0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuLy8g0L/QvtC70YPRh9Cw0Y4g0YjQsNCx0LvQvtC9INC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCwg0LHRg9C00LXRgiDQv9C10YDQtdC00LDQstCw0YLRjNGB0Y8g0LIg0LzQtdGC0L7QtCBnZW5lcmF0ZUNhcmQg0LTQu9GPINC30LDQv9C+0LvQvdC10L3QuNGPINGB0L7QtNC10YDQttC40LzRi9C8LiDQnNC10YLQvtC0INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINCyINC60L7QvdGB0YLQtSDRgNCw0LfQvNC10YLQutGDIGh0bWxcclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuLy8g0LzQtdGC0L7QtCDQtNC+0LHQsNCy0LvRj9C10YIg0LfQvdCw0YfQtdC90LjRjyDQtNC70Y8g0YLQsNC50YLQu9CwINC4INGE0L7RgtC+XHJcbiAgICBfc2V0RGF0YSgpIHtcclxuICAgICAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fcGhvdG87XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RpdGxlO1xyXG5cclxuICAgICAgICAvLyDRgdGH0LXRgtGH0LjQuiDQu9Cw0LnQutC+0LIg0L/RgNC4INGA0LXQvdC00LXRgNC1XHJcbiAgICAgICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyDQvtGC0YDQuNGB0L7QstC60LAg0LDQutGC0LjQstC90YvRhSDQu9Cw0LnQutC+0LJcclxuICAgICAgICBpZih0aGlzLl9saWtlcy5zb21lKHVzZXIgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4vLyDQvNC10YLQvtC0INGD0LTQsNC70Y/QtdGCINC60LDRgNGC0L7Rh9C60YNcclxuICAgIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV3Q2FyZC5yZW1vdmUoKTtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkID0gbnVsbDtcclxuICAgIH07XHJcblxyXG4vLyDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQu9Cw0LnQutCwXHJcbiAgICBfc3dpdGNoTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICB9O1xyXG5cclxuLy8g0LzQtdGC0L7QtCDQstC10YjQsNC10YIg0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgXHJcbiAgICAgICAgICAgIHRoaXMuX29wZW5SZW1vdmVDYXJkUG9wdXAodGhpcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMuX2NhcmRJZCwgdGhpcy5faXNMaWtlZCwgdGhpcy5jaGVja015TGlrZVN0YXR1cyk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuX3N3aXRjaExpa2UoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRoaXMuX29wZW5GdWxsc2NyZWVuKHRoaXMuX3RpdGxlLCB0aGlzLl9waG90bykgfSk7XHJcbiAgICB9O1xyXG5cclxuLy8g0L3QsNC/0L7Qu9C90Y/RjiDRgdC+0LTQtdGA0LbQuNC80YvQvFxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19waG90bycpO1xyXG5cclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnRlciA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2VzLWNvdW50ZXInKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hvd1VybigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3NldERhdGEoKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fbmV3Q2FyZDtcclxuICAgIH07XHJcbn07IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lciwgYXBpKSB7XHJcbiAgICAgICAgLy8gdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5fYXBpID0gYXBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINC80LXRgtC+0LQg0LTQvtCx0LDQstC70Y/QtdGCINC60LDRgNGC0L7Rh9C60YMg0LIg0LrQvtC90YLQtdC50L3QtdGAXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0LzQtdGC0L7QtCDRgNC10L3QtNC10YDQuNGCINC60LDRgNGC0L7Rh9C60YNcclxuICAgIHJlbmRlckNhcmRzKGNhcmRzKSB7XHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzYXZlQ2FyZHMoY2FyZCkge1xyXG4gICAgLy8gICAgIHRoaXMuX2FwaS5hZGRJdGVtXHJcbiAgICAvLyB9XHJcbn07IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VJY29uID0gdGhpcy5fc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1pY29uJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINC80LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LBcclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQvNC10YLQvtC0INC30LDQutGA0YvRgtC40Y9cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0LfQsNC60YDRi9GC0LjQtSDQvdCwIEVTQ1xyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQvdCw0LLQtdGI0LjQstCw0LXRgiDRgdC70YPRiNCw0YLQtdC70Lgg0LfQsNC60YDRi9GC0LjRjyDQvdCwINC60YDQtdGB0YLQuNC6INC4INC+0LLQtdGA0LvQtdC5XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9jbG9zZUljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRoaXMuY2xvc2UoKSB9KTtcclxuXHJcbiAgICAgICAgLy8g0LfQsNC60YDRi9GC0LjQtSDQvdCwINC+0LLQtdGA0LvQtdC5XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkgeyB0aGlzLmNsb3NlKCkgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZnVsbHNjcmVlbi10aXRsZScpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19mdWxsc2NyZWVuLWltYWdlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIG9wZW4odGl0bGUsIGxpbmspIHtcclxuICAgICAgICAvLyDRgNC+0LTQuNGC0LXQu9GM0YHQutC40Lkg0LzQtdGC0L7QtCBvcGVuINCy0YvQs9C70Y/QtNC40YIg0YLQsNC6XHJcbiAgICAgICAgLy8gX19fX19fdGhpcy5fc2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgc3VwZXIub3BlbigpOyBcclxuICAgICAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gdGl0bGU7XHJcbiAgICB9O1xyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgY2FsbGJhY2spIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtID0gY2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5cclxuICAgICAgICAvLyDQvNCw0YHRgdC40LIg0LjQvdC/0YPRgtC+0LIg0YTQvtGA0LzRi1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vINC80LXRgtC+0LQg0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzT2JqZWN0ID0geyB9O1xyXG4gICAgICAgIC8vINC/0YDQuNGB0LLQsNGO0LLQsNGOINC60LDQttC00L7QvNGDINC40L3Qv9GD0YLRgyDRgdC/0LjRgdC60LAg0LfQvdCw0YfQtdC90LjQtSDQuCDQt9Cw0L/QuNGB0YvQstCw0Y4g0LIg0L7QsdGK0LXQutGCINC40Lcg0LjQvdC/0YPRgtC+0LJcclxuICAgICAgICB0aGlzLl9mb3JtSW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0c09iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX2lucHV0c09iamVjdClcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRzT2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjYXJkRGF0YSlcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5fc3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9O1xyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvciwgc3VibWl0Q2FsbGJhY2spIHtcclxuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2RlbGV0ZS1jYXJkJyk7ICAgICAgICBcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b25fdHlwZV9kZWxldGUtY2FyZCcpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrID0gc3VibWl0Q2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IGFjdGlvbjtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IodXNlckluZm8sIHByb2ZpbGVOYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJJbmZvLnVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckluZm8udXNlckFib3V0U2VsZWN0b3IpO1xyXG4gICAgICAgIC8vIHRoaXMuX2FwaSA9IGFwaTtcclxuICAgICAgICAvLyB0aGlzLl9wcm9maWxlTmFtZSA9IHByb2ZpbGVOYW1lO1xyXG4gICAgICAgIC8vIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVzZXJEYXRhO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQv9GA0LjQvdC40LzQsNC10YIg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INC00L7QsdCw0LLQu9GP0LXRgiDQuNGFINC90LAg0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEuYWJvdXQ7XHJcbiAgICB9O1xyXG4gICAgXHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJzVXJsID0gY29uZmlnLnVybC51c2Vyc1VybDtcclxuICAgICAgICB0aGlzLl9jYXJkc1VybCA9IGNvbmZpZy51cmwuY2FyZHNVcmw7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyVXJsID0gY29uZmlnLnVybC5hdmF0YXJVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDQvNC10YLQvtC0INC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XHJcbiAgICBnZXRJbmZvQWJvdXRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91c2Vyc1VybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn0L7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQtNCw0L3QvdGL0YUnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDQviDQutCw0YDRgtC+0YfQutCw0YVcclxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyBcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gLmNhdGNoKGFsZXJ0KCfQvtGI0LjQsdC60LAnKSlcclxuICAgIH07XHJcblxyXG4gICAgLy8g0LzQtdGC0L7QtCDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG4gICAgZWRpdFByb2ZpbGVJbmZvKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJzVXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBuYW1lOiB1c2VySW5mby5uYW1lLFxyXG4gICAgICAgICAgICBhYm91dDogdXNlckluZm8uYWJvdXRcclxuICAgICAgICB9KX0sXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQvtGI0LjQsdC60LAg0L7QsdGA0LDQsdC+0YLQutC4INC00LDQvdC90YvRhScpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vINC80LXRgtC+0LQg0LTQu9GPINC+0YLRgNC40YHQvtCy0LrQuCDQsNCy0LDRgtCw0YDQutC4XHJcbiAgICBlZGl0QXZhdGFyKHVybEF2YXRhcikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9hdmF0YXJVcmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGF2YXRhcjogdXJsQXZhdGFyXHJcbiAgICAgICAgfSl9LFxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn0L7RiNC40LHQutCwINC+0LHRgNCw0LHQvtGC0LrQuCDQtNCw0L3QvdGL0YUg0LDQstCw0YLQsNGA0LAnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g0L7RgtC/0YDQsNCy0LrQsCDQutCw0YDRgtC+0YfQutC4INC90LAg0YHQtdGA0LLQtdGAXHJcbiAgICBzZW5kQ2FyZChvYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtuYW1lOiBvYmplY3QubmFtZSwgbGluazogb2JqZWN0LmxpbmssIGxpa2VzOiBvYmplY3QubGlrZXN9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZihyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQvtGC0L/RgNCw0LLQutCwINC60LDRgNGC0L7Rh9C60Lgg0L/RgNC+0YjQu9CwINGD0YHQv9C10YjQvdC+JylcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQvtGI0LjQsdC60LAg0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhScpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLy8g0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9jYXJkc1VybCArICcvJyArIGNhcmRJZCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAnZTkwMGUzNjEtYTRmOS00MTY3LWI3ZDEtZmNjMDc4YWEzMDhhJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn0L7RiNC40LHQutCwINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuC4nLCAn0L3QtSDQv9GA0L7RhdC+0LTQuNGCINC/0YDQvtCy0LXRgNC60YMgcmVzLm9rJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn0L3QtSDRgNCw0LHQvtGC0LDQtdGCJywgZXJyKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdXRMaWtlKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02My9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICdlOTAwZTM2MS1hNGY5LTQxNjctYjdkMS1mY2MwNzhhYTMwOGEnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjMvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAnZTkwMGUzNjEtYTRmOS00MTY3LWI3ZDEtZmNjMDc4YWEzMDhhJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxufSIsIi8vINC/0LXRgNC10LzQtdC90L3Ri9C1XHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9wcm9maWxlJyk7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfcHJvZmVzc2lvbicpO1xyXG5cclxuLy8g0LTQu9GPINCw0LLQsNGC0LDRgNC60LhcclxuZXhwb3J0IGNvbnN0IGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9hdmF0YXInKTtcclxuXHJcblxyXG4vL9C60L3QvtC/0LXQutC4INC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LJcclxuZXhwb3J0IGNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fY2xvc2UtaWNvbicpO1xyXG5cclxuLy8g0LzQsNGB0YHQuNCyINC/0L7Qv9Cw0L/QvtCyLCDQstC60LvRjtGH0LDRjyDQvtCy0LXRgNC70LXQuFxyXG5leHBvcnQgY29uc3QgcG9wdXBBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpO1xyXG5cclxuLy8g0LTQu9GPINGE0L7RgtC+INC60LDRgNGC0L7Rh9C10LpcclxuZXhwb3J0IGNvbnN0IHNlY3Rpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG5cclxuLy8g0LrQvtC90YHRgtGLINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuZXhwb3J0IGNvbnN0IG5ld0NhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBUeXBlQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZC1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cElucHV0VHlwZUNhcmROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2NhcmQtbmFtZScpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbnB1dFR5cGVDYXJkTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9jYXJkLWxpbmsnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1UeXBlQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkJyk7XHJcblxyXG4vLyDQtNC70Y8g0YTRg9C70LvRgdC60YDQuNC9INC60LDRgNGC0L7Rh9C10LpcclxuZXhwb3J0IGNvbnN0IGZ1bGxzY3JlZW5JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZnVsbHNjcmVlbi1pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgZnVsbHNjcmVlblRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mdWxsc2NyZWVuLXRpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFR5cGVGdWxsc2NyZWVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZnVsbHNjcmVlbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkJyk7XHJcblxyXG5cclxuLy8g0L3QsNGH0LDQu9GM0L3Ri9C5INC80LDRgdGB0LjQsl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xyXG4vLyBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXHJcbi8vICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuLy8gICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgbmFtZTogJ9Ca0LDRgNC10LvQuNGPJyxcclxuLy8gICAgICAgbGluazogJ2h0dHBzOi8vd3d3LnktZmxpZ2h0cy5jb20vYmxvZ3MvYXZ0LWthcmVsaXlhL2F2dG9yc2tpaC10dXJvdi12LWthcmVsaXl1LmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcclxuLy8gICAgICAgbGluazogJ2h0dHBzOi8va2FydGlua2luLm5ldC9waWNzL3VwbG9hZHMvcG9zdHMvMjAyMi0wOC8xNjU5NTE2ODEzXzY4LWthcnRpbmtpbi1uZXQtcC1kZWlzdHZ1eXVzaGNoaWUtdnVsa2FuaS1rYW1jaGF0a2ktcHJpcm9kYS02OS5qcGcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0J/QtdGC0YDQvtC/0LDQstC70L7QstGB0Lot0JrQsNC80YfQsNGC0YHQutC40LknLFxyXG4vLyAgICAgICBsaW5rOiAnaHR0cHM6Ly9rZXktbXMucnUvd3AtY29udGVudC91cGxvYWRzLzIvNi8zLzI2MzYwOGJjZDI1NjM0ZGViMGNlODkxODhlYjNhNjIzLmpwZWcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcclxuLy8gICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4vLyAgICAgfVxyXG4vLyAgIF07IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuXHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5cclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5cclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcblxyXG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcydcclxuXHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcblxyXG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaSc7XHJcblxyXG5pbXBvcnQgeyBcclxuICBkZWxldGVDYXJkUG9wdXAsXHJcbiAgYXZhdGFyRm9ybSxcclxuICBhdmF0YXIsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGVkaXRCdXR0b24sXHJcbiAgcG9wdXBQcm9maWxlLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIGRlc2NyaXB0aW9uLFxyXG4gIHBvcHVwRm9ybVByb2ZpbGUsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGpvYklucHV0LFxyXG4gIGNsb3NlQnV0dG9ucyxcclxuICBwb3B1cEFycmF5LFxyXG4gIHNlY3Rpb25FbGVtZW50cyxcclxuICBuZXdDYXJkQWRkQnV0dG9uLFxyXG4gIHBvcHVwVHlwZUFkZENhcmQsXHJcbiAgcG9wdXBJbnB1dFR5cGVDYXJkTmFtZSxcclxuICBwb3B1cElucHV0VHlwZUNhcmRMaW5rLFxyXG4gIGZvcm1UeXBlQWRkQ2FyZCxcclxuICBmdWxsc2NyZWVuSW1hZ2UsXHJcbiAgZnVsbHNjcmVlblRpdGxlLFxyXG4gIHBvcHVwVHlwZUZ1bGxzY3JlZW5cclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxuLy8g0LrQvtC90YTQuNCzINC00LvRjyBBUElfX19fX19fX19fX19fX19fX19fX19fX19fX19cclxuY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIHVybDoge1xyXG4gICAgdXNlcnNVcmw6ICdodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYzL3VzZXJzL21lJyxcclxuICAgIGNhcmRzVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02My9jYXJkcycsXHJcbiAgICBhdmF0YXJVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYzL3VzZXJzL21lL2F2YXRhcidcclxufSxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnZTkwMGUzNjEtYTRmOS00MTY3LWI3ZDEtZmNjMDc4YWEzMDhhJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8g0LjQvdGB0YLQsNC90YEgQVBJX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDYXJkKGNhcmRJZCwgY2hlY2tMaWtlLCBjYXJkKSB7XHJcbiAgaWYoY2hlY2tMaWtlKSB7XHJcbiAgICBhcGkuZGVsZXRlTGlrZShjYXJkSWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygn0YPQtNCw0LvQuNC7INC70LDQudC6Jyk7XHJcbiAgICAgIH0pXHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgYXBpLnB1dExpa2UoY2FyZElkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9C/0L7RgdGC0LDQstC40Lsg0LvQsNC50LonKTtcclxuICAgICAgfSlcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8g0LjQvdGB0YLQsNC90YEgVXNlckluZm9cclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcclxuICB1c2VyQWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbidcclxufSwgcHJvZmlsZU5hbWUsIGRlc2NyaXB0aW9uLCBhdmF0YXIpO1xyXG5cclxuXHJcblxyXG4vLyDQv9C+0L/QsNC/INGE0L7RgNC80Ysg0L/RgNC+0YTQuNC70Y9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cclxuY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfcHJvZmlsZScsICh1c2VyRGF0YSkgPT4ge1xyXG4gIGFwaS5lZGl0UHJvZmlsZUluZm8odXNlckRhdGEpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcywgJ9C00LDQvdC90YvQtSDQsiDQvNC+0LzQtdC90YIg0L7RgtC/0YDQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC40L3RhNC+0YDQvNCw0YbQuNC4INC/0YDQvtGE0LjQu9GPJyk7XHJcbiAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcmVzLm5hbWU7XHJcbiAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcmVzLmFib3V0O1xyXG4gICAgfSlcclxufSk7XHJcbi8vINGB0LvRg9GI0LDRgtC10LvQuCDQv9C+0L/QsNC/0LAg0L/RgNC+0YTQuNC70Y9cclxucHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5cclxuLy8g0L7RgtC60YDRi9GC0LjQtSDRhNC+0YDQvNGLINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB2YWxpZGF0b3JQcm9maWxlRm9ybS5zd2l0Y2hFcnJvck1vZGUoKTtcclxuICB2YWxpZGF0b3JQcm9maWxlRm9ybS5zd2l0Y2hQcm9maWxlQnV0dG9uTW9kZSgpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGpvYklucHV0LnZhbHVlID0gZGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbiAgcHJvZmlsZUZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcblxyXG5cclxuLy8g0L/QvtC/0LDQvyDQsNCy0LDRgtCw0YDQutC4X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXHJcbmNvbnN0IGZvcm1XaXRoQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhcicsICgpID0+IHtcclxuICBjb25zdCB1cmxBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYXZhdGFyJykudmFsdWU7XHJcblxyXG4gICAgY29uc29sZS5sb2codXJsQXZhdGFyLCAn0YHRgdGL0LvQutCwINC90LAg0LDQstCw0YLQsNGAJylcclxuICAgIGFwaS5lZGl0QXZhdGFyKHVybEF2YXRhcilcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcywgJ9GA0LXQt9GD0LvRjNGC0LDRgiDRgNCw0LHQvtGC0Ysg0LDQstCw0YLQsNGA0LAnKTtcclxuICAgICAgICBhdmF0YXIuc3JjID0gcmVzLmF2YXRhcjtcclxuICAgICAgfSlcclxuICB9KTtcclxuICBmb3JtV2l0aEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAvLyDQvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LDQstCw0YLQsNGA0LrQuFxyXG4gIGF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIC8vIGZvcm1XaXRoQXZhdGFyLmRpc2FibGVGb3JtV2l0aEF2YXRhckJ1dHRvbigpO1xyXG4gICAgZm9ybVdpdGhBdmF0YXIub3BlbigpO1xyXG4gIH0pXHJcbi8vIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xyXG5cclxuXHJcblxyXG5sZXQgdXNlcklkID0gbnVsbDtcclxuXHJcbi8vINC30LDQv9GA0L7RgdGLIHVzZXJpbmZvINC4IGluaXRpYWxjYXJkc1xyXG5Qcm9taXNlLmFsbChbYXBpLmdldEluZm9BYm91dFVzZXIoKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAudGhlbihcclxuICAgIChbdXNlckluZm8sIGNhcmRzXSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyh1c2VySW5mbywgY2FyZHMsICfQstC+0L7QvtC+0L7QvtC+0L7QvtC+0L7QvtC+0L7QvtGCINC+0L3QuCEhIScpO1xyXG4gICAgICB1c2VySWQgPSB1c2VySW5mby5faWQ7XHJcbiAgICAgIC8vIGNhcmRJZCA9IGNhcmRzLm93bmVyLl9pZDtcclxuICAgICAgY29uc29sZS5sb2codXNlcklkLCAnaGFoYWhhYWhoYScpXHJcbiAgICAgIC8vINGA0LXQvdC00LXRgCDQv9GA0L7RhNC40LvRj1xyXG4gICAgICBjb25zdCByZW5kZXJQcm9maWxlID0gKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcclxuICAgICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xyXG4gICAgICAgIGF2YXRhci5zcmMgPSB1c2VySW5mby5hdmF0YXI7XHJcbiAgICAgIH07IFxyXG4gICAgICByZW5kZXJQcm9maWxlKCk7XHJcbiAgICAgIC8vINGA0LXQvdC00LXRgCDQutCw0YDRgtC+0YfQtdC6XHJcbiAgICAgIGNhcmRMaXN0LnJlbmRlckNhcmRzKGNhcmRzLnJldmVyc2UoKSk7XHJcbiAgICB9IFxyXG4gIClcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgYWxlcnQoYNCh0YLRgNCw0L3QuNGG0LAg0LLRgNC10LzQtdC90L3QviDQvdC10LTQvtGB0YLRg9C/0L3QsCwg0L7RiNC40LHQutCwIC0gJHsoZXJyKX1gKTtcclxuICB9KVxyXG5cclxuXHJcblxyXG4vLyDQuNC90YHRgtCw0L3RgSBTZWN0aW9uX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBbXSwgXHJcbiAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZCkpO1xyXG59fSwgJy5lbGVtZW50cycpO1xyXG5cclxuLy8g0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQuNC90YHRgtCw0L3RgdCwINC60LDRgNGC0L7Rh9C60LhfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChvYmplY3QpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQob2JqZWN0LCB1c2VySWQsICcjY2FyZC10ZW1wbGF0ZScsIG9wZW5GdWxsc2NyZWVuUGhvdG8sIFxyXG4vLyDRg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICAoKSA9PiB7XHJcbiAgICByZW1vdmVDYXJkUG9wdXAub3BlbigpO1xyXG4gICAgcmVtb3ZlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgIGFwaS5kZWxldGVDYXJkKG9iamVjdC5faWQpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgY2FyZC5kZWxldGVDYXJkKClcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICB9LFxyXG4vLyDRgNCw0LHQvtGC0LAg0LvQsNC50LrQsFxyXG4gICgpID0+IHtcclxuICAgIGlmKG9iamVjdC5saWtlcy5zb21lKHVzZXIgPT4gdXNlci5faWQgPT09IHVzZXJJZCkpIHtcclxuICAgICAgYXBpLmRlbGV0ZUxpa2Uob2JqZWN0Ll9pZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn0YPQtNCw0LvQuNC7INC70LDQudC6Jyk7XHJcbiAgICAgICAgICBjYXJkLmRlbGV0ZUxpa2UoKTtcclxuICAgICAgICAgIG9iamVjdC5saWtlcyA9IHJlcy5saWtlcztcclxuICAgICAgICAgIGNhcmQuY291bnRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgYXBpLnB1dExpa2Uob2JqZWN0Ll9pZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn0L/QvtGB0YLQsNCy0LjQuyDQu9Cw0LnQuicpO1xyXG4gICAgICAgICAgY2FyZC5hZGRMaWtlKCk7XHJcbiAgICAgICAgICBvYmplY3QubGlrZXMgPSByZXMubGlrZXM7XHJcbiAgICAgICAgICBjYXJkLmNvdW50TGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuLy8g0L/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXHJcbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2FkZC1jYXJkJywgKCkgPT4ge1xyXG5cclxuICBjb25zdCBvYmplY3QgPSB7XHJcbiAgICBuYW1lOiBwb3B1cElucHV0VHlwZUNhcmROYW1lLnZhbHVlLFxyXG4gICAgbGluazogcG9wdXBJbnB1dFR5cGVDYXJkTGluay52YWx1ZSxcclxuICAgIGxpa2VzOiBbXSxcclxuICAgIG93bmVyOiB7XHJcbiAgICAgIF9pZDogIHVzZXJJZFxyXG4gICAgfVxyXG4gIH07XHJcbiAgLy8g0LfQsNC/0YDQvtGBINC90LAg0LTQvtCx0LDQstC70LXQvdC40LVcclxuICBhcGkuc2VuZENhcmQob2JqZWN0KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XHJcbiAgICB9KVxyXG59KTtcclxuXHJcbi8vINGB0LvRg9GI0LDRgtC10LvRjCDQvtGC0LrRgNGL0YLQuNGPINGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQuCDRgdC70YPRiNCw0YLQtdC70Lgg0L/QvtC/0LDQv9CwXHJcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbm5ld0NhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgdmFsaWRhdG9yQWRkQ2FyZEZvcm0uc3dpdGNoRXJyb3JNb2RlKCk7XHJcbiAgdmFsaWRhdG9yQWRkQ2FyZEZvcm0uZGlzYWJsZUFkZENhcmRQb3B1cEJ1dHRvbigpO1xyXG4gIGFkZENhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcbi8vINC/0L7Qv9Cw0L8g0L7RgtC60YDRi9GC0L7QuSDQutCw0YDRgtC+0YfQutC4INC4INC10LPQviDRgdC70YPRiNCw0YLQtdC70LhcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfZnVsbHNjcmVlbicpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vINGE0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0YTQvtGC0L5cclxuZnVuY3Rpb24gb3BlbkZ1bGxzY3JlZW5QaG90byh0aXRsZSwgbGluaykge1xyXG4gIGltYWdlUG9wdXAub3Blbih0aXRsZSwgbGluayk7XHJcbn07XHJcblxyXG5cclxuLy8g0L/QvtC/0LDQvyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhfX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xyXG5jb25zdCByZW1vdmVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfdHlwZV9kZWxldGUtY2FyZCcpOyBcclxucmVtb3ZlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuXHJcbi8vINCy0LDQu9C40LTQsNGG0LjRj19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXHJcblxyXG5jb25zdCBlbmFibGVDb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdC1idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxufTtcclxuXHJcbi8vIGNvbnNvbGUubG9nKGZvcm1XaXRoQXZhdGFyLmRpc2FibGVGb3JtV2l0aEF2YXRhckJ1dHRvbilcclxuXHJcbi8vINCy0LDQu9C40LTQsNGC0L7RgCDRhNC+0YDQvNGLINC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IHZhbGlkYXRvclByb2ZpbGVGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZW5hYmxlQ29uZmlnLCBwb3B1cEZvcm1Qcm9maWxlKTtcclxudmFsaWRhdG9yUHJvZmlsZUZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8g0LLQsNC70LjQtNCw0YLQvtGAINGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCB2YWxpZGF0b3JBZGRDYXJkRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKGVuYWJsZUNvbmZpZywgZm9ybVR5cGVBZGRDYXJkKTtcclxudmFsaWRhdG9yQWRkQ2FyZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8g0LLQsNC70LjQtNCw0YLQvtGAINGE0L7RgNC80Ysg0LDQstCw0YLQsNGA0LrQuFxyXG5jb25zdCB2YWxpZGF0b3JBdmF0YXJGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZW5hYmxlQ29uZmlnLCBhdmF0YXJGb3JtKTtcclxuLy8gdmFsaWRhdG9yQXZhdGFyRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7Il0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jb25maWciLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3NwYW5FcnJvcnMiLCJrZXkiLCJ2YWx1ZSIsImlucHV0RWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yU3BhbiIsImNvbmNhdCIsImlkIiwiZXJyb3JDbGFzcyIsInRleHRDb250ZW50IiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfdGhpcyIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInNwYW4iLCJpbnB1dCIsIkNhcmQiLCJkYXRhIiwidXNlcklkIiwidGVtcGxhdGVTZWxlY3RvciIsImZ1bGxzY3JlZW4iLCJvcGVuUmVtb3ZlQ2FyZFBvcHVwIiwiaGFuZGxlTGlrZUNhcmQiLCJfdGl0bGUiLCJuYW1lIiwiX3Bob3RvIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9jYXJkSWQiLCJfdXNlcklkIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfb3BlbkZ1bGxzY3JlZW4iLCJfb3BlblJlbW92ZUNhcmRQb3B1cCIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9saWtlQnV0dG9uIiwibGlrZXNBcnJheSIsIl9saWtlc0FycmF5IiwiX25ld0NhcmQiLCJsZW5ndGgiLCJfZGVsZXRlQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZSIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfbGlrZXNDb3VudGVyIiwidXNlciIsInRvZ2dsZSIsIl90aGlzMiIsIl9pc0xpa2VkIiwiY2hlY2tNeUxpa2VTdGF0dXMiLCJfZ2V0VGVtcGxhdGUiLCJfc2hvd1VybiIsIl9zZXREYXRhIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXIiLCJhcGkiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIl9hcGkiLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmRzIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9zZWxlY3RvciIsIl9jbG9zZUljb24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfaW1hZ2UiLCJ0aXRsZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2siLCJfc3VibWl0Rm9ybSIsIl9mb3JtSW5wdXRMaXN0IiwiX2lucHV0c09iamVjdCIsIl90aGlzMyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJzZWxlY3RvciIsInN1Ym1pdENhbGxiYWNrIiwiX3N1Ym1pdENhbGxiYWNrIiwiYWN0aW9uIiwiVXNlckluZm8iLCJ1c2VySW5mbyIsInByb2ZpbGVOYW1lIiwiZGVzY3JpcHRpb24iLCJhdmF0YXIiLCJfdXNlck5hbWUiLCJ1c2VyTmFtZVNlbGVjdG9yIiwiX3VzZXJBYm91dCIsInVzZXJBYm91dFNlbGVjdG9yIiwiX2F2YXRhciIsImFib3V0IiwibmV3VXNlckRhdGEiLCJBcGkiLCJfdXNlcnNVcmwiLCJ1cmwiLCJ1c2Vyc1VybCIsIl9jYXJkc1VybCIsImNhcmRzVXJsIiwiX2F2YXRhclVybCIsImF2YXRhclVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVybEF2YXRhciIsIm9iamVjdCIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJjYXRjaCIsImVyciIsImVkaXRCdXR0b24iLCJwb3B1cEZvcm1Qcm9maWxlIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJhdmF0YXJGb3JtIiwibmV3Q2FyZEFkZEJ1dHRvbiIsInBvcHVwSW5wdXRUeXBlQ2FyZE5hbWUiLCJwb3B1cElucHV0VHlwZUNhcmRMaW5rIiwiZm9ybVR5cGVBZGRDYXJkIiwicHJvZmlsZUZvcm0iLCJ1c2VyRGF0YSIsImVkaXRQcm9maWxlSW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwidmFsaWRhdG9yUHJvZmlsZUZvcm0iLCJzd2l0Y2hFcnJvck1vZGUiLCJzd2l0Y2hQcm9maWxlQnV0dG9uTW9kZSIsIm9wZW4iLCJmb3JtV2l0aEF2YXRhciIsImVkaXRBdmF0YXIiLCJQcm9taXNlIiwiYWxsIiwiZ2V0SW5mb0Fib3V0VXNlciIsImdldEluaXRpYWxDYXJkcyIsIl9yZWYyIiwiY2FyZExpc3QiLCJyZW5kZXJDYXJkcyIsInJldmVyc2UiLCJhbGVydCIsImNhcmQiLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsIm9wZW5GdWxsc2NyZWVuUGhvdG8iLCJyZW1vdmVDYXJkUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxldGVDYXJkIiwiZGVsZXRlTGlrZSIsImNvdW50TGlrZXMiLCJwdXRMaWtlIiwiYWRkTGlrZSIsImdlbmVyYXRlQ2FyZCIsImFkZENhcmRGb3JtIiwic2VuZENhcmQiLCJ2YWxpZGF0b3JBZGRDYXJkRm9ybSIsImRpc2FibGVBZGRDYXJkUG9wdXBCdXR0b24iLCJpbWFnZVBvcHVwIiwiZW5hYmxlQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=